schema_version: "2.0"

# ============================================================================
# ⚠️  KNOWN ISSUE - OCCT Boolean Limitation
# ============================================================================
# This example demonstrates a known limitation in OCCT (Open CASCADE):
# Boolean cut operations on swept geometry with sharp corners can fail.
#
# ERROR: "Null TopoDS_Shape object" when cutting inner sweep from outer sweep
#
# WORKAROUND: Use pipe_sweep_simple.yaml (solid profile without holes)
# Or: Design hollow pipes using shell operations instead of sweep+cut
#
# This is a CadQuery/OCCT issue, not a TiaCAD bug.
# ============================================================================

metadata:
  name: Curved Pipe - KNOWN ISSUE (Sweep + Boolean Cut Limitation)
  description: Demonstrates OCCT limitation with sweep + cut operations
  version: 1.0
  author: TIA
  created: 2025-10-26
  phase: 3

parameters:
  pipe_outer_radius: 5
  pipe_inner_radius: 4

sketches:
  pipe_profile:
    plane: XY
    origin: [0, 0, 0]
    shapes:
      # Outer circle
      - type: circle
        radius: ${pipe_outer_radius}
        center:
          - 0
          - 0

      # Inner circle (creates hollow pipe)
      - type: circle
        radius: ${pipe_inner_radius}
        center:
          - 0
          - 0
        operation: subtract

# ============================================================================
# NOTE: The parts section is currently required even for sketch-only designs.
# We use a minimal placeholder part that will be ignored during export.
# The actual geometry comes from the sweep operation below.
# ============================================================================
parts:
  _placeholder:
    primitive: box
    parameters:
      width: 1
      height: 1
      depth: 1
    origin: center

operations:
  curved_pipe:
    type: sweep
    profile: pipe_profile
    path:
      - [0, 0, 0]
      - [10, 0, 0]
      - [10, 10, 0]

export:
  default_part: curved_pipe
